"use client"
import { useDispatch, useSelector } from 'react-redux'
import { useEffect } from 'react'
import { RootState, AppDispatch } from '@/data/store'
import { getAllProducts } from '@/data/authSlice'
import ProductItem from './products/ProductItem'
export default function Home() {

  const dispatch = useDispatch<AppDispatch>();
  const products = useSelector((state: RootState) => state.counter.products)
  const isProductLoading = useSelector((state: RootState) => state.counter.isLoading)

  useEffect(() => {
    dispatch(getAllProducts())
    // throw "something went wrong"
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return (
    <main>
      {
        isProductLoading ? <img src='data:image/jpeg;base64,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'/>
          :
          products.map(x => <ProductItem key={x.id} product={x}></ProductItem>)
      }

    </main>
  )
}
